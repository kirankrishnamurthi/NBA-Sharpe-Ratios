## The Basketball Sharpe Ratio: Risk Adjusting Excess Points
---
*Kiran Krishnamurthi*

*February 2023*

If you've been following the NBA over the past few years, you'll be well aware of the scoring "inflation" that has taken place across the league. Gone are the days where being a 20+ points-per-game (PPG) scorer could get you an all-star nomination. Going back 10-years to the 2012-2013 NBA season, nine players averaged 20+ points-per-game. Go back five years to the 2017-2018 NBA season and you'll see 23 players averaged 20+ points-per-game. An in today's league for the 2022-2023 NBA season, a whoping 38 players are average 20+ points-per-game. In the past decade, the league has seen a 322% increase in 20+ point-per-game scorers. Sure, 20 is an arbitrary benchmark for someone who's considered a good scorer, but it goes to show the proliferation of points in today's league. 

While there are a host of factors that have given way to the scoring explosion over the past decade, free throws have always been a point of interest to me. Stephen Curry is one of the generation's elite scorers, and I've always admired his ability to create his own points off the dribble, meaning Steph can get buckets whenever he wants through his ability to get to the hoop, put up threes, or pop a mid-range jumper. In other words, Steph isn't realiant on the free-throw line or getting foul calls to get his points, or at least I'm of this belief. On the other hand, I can't help but think about Harden's MVP caliber years in Houston as being *heavily* reliant on getting foul calls on baited drivers and three-pointers. Harden generated historic scoring numbers during his MVP season, and to his credit he proved that he's one of the greatest to ever do it. But, his season stats prompted me to dig further into the source and value of his points. Basketball fans will know that despite Harden's massive offensive contribution, he dissapeared in the biggest moments and remains one of the 21st century MVPs without a NBA championship. Therefore, I'm left asking the question: **is there a better way to measure a player's offensive value besides pure PPG numbers?** 

Over the past semester I've gotten the chance study and work on problems in quantitative finance, leaving me with an interest to apply principles and concepts from this realm into other domains where applicable. One of the simplest but most influential contributions in this space is the Sharpe Ratio. The Sharpe Ratio, for those who aren't familiar with this concept, is an asset or portfolio performance metric created by William Sharpe back in 1996. This metric compares an investment's return with its risk, based on the belief that higher excess returns may come with greater volatility and risk over the same timeframe. When it comes to investing strategy, the Sharpe Ratio can be understood as a risk-adjusted performance metric to compare investing skill. 

$$ Sharpe = \frac{\mu_{i} - r_f}{\sigma_{i}} $$

The two components of the Sharpe Ratio that pique my interest in using it explain better offensive output in the NBA are (1) excess returns and (2) return volatility. Excess returns in finance are measured by the actual return on an assets minus the risk-free return. The risk-free return is simply the expected return on an asset with zero risk. While there's no truly risk-free asset, most investors treat this so called "risk-free rate" as the rate of return they expected at minimum from parking their money somewhere, most likely being the safest or lowest risk asset out there. This is often represented through the rate of return on short-term government bonds.

I liken this back to basketball by considering risk-free points as free-throw attempts. A free-throw is quite literally a chance at "free" points. We can solve one of the original problems I had with understanding a player's offensive value by distilling their points scored from those points that came through free-throws. Free-throw attempts and makes aren't the same idea, but if you're a player getting a lot of free-throw attempts you should be expected to produce more points since you're given more chances at "free" points. Most investors will adopt the same risk-free rate but not all basketball players have the same amount of free-throw attempts per game, but makes the concept of "excess points" something unique and specific to each player. 

The second concept from the Sharpe Ratio which I connect back to basketball is return volatility. This should be more straightforward, but it is just the measure of an asset's standard deviation over some timeframe. To put this in a basketball context, I treat this component of the Sharpe Ratio as the standard deviation of a player's points-per-game over an NBA season.

$$ B = \frac{\mu_{ppg} - \mu_{fta}}{\sigma_{ppg}} $$

Above I represent the translated Sharpe Ratio into basketball ($B$) terms. The rest of this paper looks into the behaviour of this metric over the past handful of NBA seasons and trys to show a more accurate understanding of a player's offensive value compared to their raw PPG numbers. 

### James Harden and the 2017-2018 NBA Regular Season

#### How much do free throw attempts impact Harden's scoring?

![harden_dual_plot](./images/james_harden_dual_plot.png)

The above two plots take a closer look into James Harden's scoring output during his MVP season. There is no doubt he put up an MVP worthy performance, with multiple 50+ point games in the era before the scoring explosion that we're currently experience. However, the closer examination does reveal that across the season, Harden's "risk-free" (free throw attempts) points accounted for 35% of his total points-per-game. This number doesn't mean too much on it's own, but it does allow us to understand that perhaps on any given night, 35% of James Harden's points could be coming from the free-throw line.

Another takeaway from the dual plot above would be the understanding in the relationship between massive scoring performances and total free throw attempts. An inital hypothesis I had when approaching this project was whether Harden's massive MVP-caliber scoring nights came from a disproportionate amount of free throw attempts. While I'm not testing for any statistical significance in evaluating this idea, the eye test suggests otherwise. It seems the big scoring nights from Harden aren't as heavily influenced by his trips to the free-throw line as some of his other nights. 

Finally, it would appear that Harden's reliance on the charity stripe to get points increases throughout the NBA season. The plot on the right is a time-series plot of the "share" of points that Harden scored that could've potentially come from the free-throw line (measured by total free throw attempts), and it suggests a slight positive trend from the start to the end of the season. The plot on the left showing his nightly free throw attempts may also provide better visual evidence as to the increase across the season. This finding is important insofar as perhaps Harden's MVP campaign is bolstered by his ability to foul-bait and receive calls as the season progressed. Or, maybe it gives into the idea that the better players get calls; as Harden built up a name for himself as the league's best scorer, he started to receive more favorable calls from the refs. Regardless, Harden's average free throw attempts per game clearly crept up along with his MVP odds. 

#### Applications on the Top 30 Scorers from the 2017-2018 Season

![B_2017_Plot](./images/B_Versus_PPG_1718.png)

Plotted above on the x-axis is are the $B$ for the top 30 scorers (highest PPG) from the 2017-2018 NBA. The y-axis shows their points-per-game, conventional/easiest way to evaluate a player's scoring ability. Our MVP sits in his own layer of the chart, head and shoulders above any competition for points-per-game during his campaign. However, the if we look at this through the lens of players $B$ ratios, there's a different story. While Harden averaged the most PPG, there are 13 players with higher $B$ ratios despite scoring fewer points per game. Given that the components of the $B$ ratio are fairly simple, it is safe to say that all 13 of these players either take fewer free throw attempts per game or their nightly PPG remains consistent throughout the season. This logic is somewhat consistent with the efficient frontier in finance, where superior portfolios offer the best combination of high return with minimized risk.

One aspect of this $B$ ratio model that is fundamentally different from the Sharpe ratio in finance is the dynamic risk-free rate I am using in my analysis. If a portfolio manager is eveluating different portfolio choices, they are most likely going to be using the same risk-free rate to compute excess returns for all portfolios. However, in this model, the $B$ ratios are 100% player specific as each player has their own unique amount of average free throw attempts. Therefore, the risk-free rate in the model ($\mu_{fta}$) is dynamic as it adjusts with each player and produces a corresponding $B$. This is where the lines of basketball and finance do not neatly converge, but if I really wanted to keep it consistent I could use a league-wide average for free throw attempts while keeping the $\mu_{ppg}$ and $\sigma_{ppg}$ measures player specific. The dynamic risk-free rate is an integral part of the model and approach to the analysis, as taking out their respective free throw attempts from their points per game allows us to understand how many points **they are** responsible for versus points that the officiating or defense (unnecessary fouling) may be contributing. 

![Efficient_Frontier](./images/sharpe_components_1718.png)

The above plot decomponses the $B$ ratio and plots the excess returns on the y-axis while keeping volatility on the x-axis. This plot is designed to replicate an efficient frontier style plot, except we're looking at excess points per game and not the expected points per game. The difference is important as my goal is to take out "free" points that are measured by a player's free throw attempts. I also broke up the plot into 4 quadrants, assigned 1 through 4 moving clockwise from the top left. This makes quadrant 1 the top left corner, quadrant 2 the top right corner, quadrant 3 the bottom right corner, and quadrant 4 the bottom left corner. The best quadrant to be in is quadrant 1, as players in this quadrant exhibit higher excess points and lower volatility in their scoring. They can be considered the most consistent performers given their low volatility as well as some of the most efficient performers given their lack of reliance on free throws to get points. 

Quadrant 1 is home to only four players, and one on the border. CJ McCollum, Victor Oladipo, Giannis Antetokounmpo, and Klay Thompson are the four players from the 2017-2018 season who slide into this position. Kevin Durant is on the border. Our MVP, James Harden, finds himself in quadrant 2. Despite Harden's reliance on the free throw line to get his points, he is still such an offensive weapon that even when we take out his free throw attempts from nightly points per game, he remains amongst the league's best scorers. However, a big driver of his positioning in this chart is the scoring volatility. Referencing the first plot, it becomes clear that Harden has a lot of ups and downs to his scoring, with the nightly output somewhere in the range of 20 to 60 (more realistically 25 - 45) points. 

The chart shows that Harden has a scoring volatility $\sigma_{ppg}$ of ~9.25. He's only topped by Anthony Davis as the most volatile scorer during this season, which does have implications for a head coach or a GM. Some of the decisions or questions that come to mind when looking at the plot would be how much can I trust my superstar depending on what quadrant they land in? For a head coach, trying to run your offense through a player in quadrants 1 or 2 makes sense given that they are amongst the league's best scorers. But, at the same time, when a player has a PPG range of nearly 20 (one standard deviation above/below the mean), then a coach is at risk for an offensive collapse or meltdown if their superstar can't get it going. Obviously a team would not put all their eggs in one basket and most likely trust the offense from other players. Nonetheless, I see this as more of a consideration to make when offering someone a max contract, because will they really be *that guy* all season if their scoring is so volatile? 

When it comes to evaluating the talent out there during that 2017-2018 NBA season, this chart would suggest that LeBron James or Kevin Durant were "better" scorers when taking the quality of offense into account. Both LeBron and Durant are more consistent in their scoring with lower volatility, but still manage to put up the same amount of excess points (or more) than Harden. If one were to draw out an efficient frontier on this chart, both LeBron and Durant would end up as tangency points. They might not have dominated the media with flashy 60-point games, but they were consistent throughout the season-- perhaps a big reason why the two of them met in the NBA finals whereas Harden all but dissapeared during the Western Conference Finals. 

Finally, but maybe my favorite, takeaway from this season's $B$ ratio analysis would be understanding the greatness that is Klay Thompson. Figure 2, which plots players' $B$, shows that Klay has undoubtedly the highest $B$ out of all players that season. Klay's greatness does not come in the form of a player who a team would run their offense through, but instead comes through his consistency and control over his own output. Klay has the 3rd lowest scoring volatility out of the top 30 scorers from that season, but still remains in the top half of players in terms of excess points. What's even more interesting / insightful is the delta between his average and excess ppg. Klay only averages 1.34 free throw attempts per game compared to Harden who's averaging ~10. I'll concede that circumstances and roles are a big driver of the gap; a player who's always attacking and has the ball in his hands (Harden) is naturally going to get more calls than a three and D floor spacer (Klay). But, Klay is masterfully efficienct. He's able to put up nearly ~20 points per game with barely any reliance on the free-throw line. The next two closest scorers are Khris Middleton and T.J. Warren, both of which average 3.28 and 2.92 times more free throw attempts than Klay, respectively. 

### Contemporary Applications for the Current Season
---

!['Joint_Plots_2K23](./images/joint_sharpe_plots_for_2K23.png)

The above plot applies the $B$ ratio to the 2022-2023 NBA season and decomposes the components for the top 30 players in terms of their average PPG. Not all players have played the same amount of games which does have an unfair impact on the volatility for those who have played more games, but for the most part all players in this sample have played sufficient games to get a reliable estimate. 

The first observation from these two plots side by side is the scaling of the y-axis from the first plot to the next. The left plot measures PPG on the y-axis whereas the y-axis on the right plot measures the excess PPG, taking out free throw attempts from a players PPG. There's nearly a 10-point difference between the two y-axes, suggesting that free throws have become an even larger part of scoring today. There's some great movement between positioning on the two graphs as well. For example, Joel Embiid is averaging the most PPG in the league as of today, but when we take out free throw attempts from this number he falls back to 6th. Embiid is averaging ~33 points per game but subtracting free throw attempts leaves him with ~21.5. Yes, Embiid isn't making all 12 of his free throw attempts every single night, but taking the free throw attempts out of his PPG numbers shows us how many points he's individually generating every single night versus points that come from calls. 

The quadrant 1 players this season are Stephen Curry, LeBron James, Kevin Durant, Kyrie Irving, Jason Tatum, Jaylen Brown, and Shai Gilgeous-Alexander (SGA). SGA making the first quadrant is a bit of a surprise to me, but I'll admit I haven't watched a ton of OKC basketball this season. He's been on a scoring rampage this season, putting up nearly ~30 PPG and the low volatility (relative to the rest of the league) suggests he's able to keep up the output. Granted, there's roughly a 10-point difference between his PPG averages and excess point numbers but this is in line with the drop for most other players too. LeBron and Steph standout amongst the rest, masterfully efficient scorers who you can depend on. LeBron continues to impress on the court, but it sometimes feels like his performances are drowned out by the impressive feats from other rising stars across the league. If anything, this chart should re-affirm his greatness as he's able to consistently to put up these incredible scoring numbers on his own, ahead of the rest of the league. 

Two players who I'm surprised seem to perform poorly under this $B$ ratio evaluation are Nikola Jokic and Giannis Antetokounmpo. Jokic and the Nuggests are at the top of the Western conference and he's been building a case for his 3rd consecutive MVP. Giannis and the Bucks have been dominant too, winners of nine in a row of late. Jokic place into quadrant 4 in the components plot, and has a $B$ ratio of 2.2. Giannis is in quadrant 3 with a Sharpe ratio of 1.8. Jokic doesn't do anything poorly but he also doesn't stand out amongst the rest, pushing the argument that his contributions to his team's success and MVP campaign come from non-scoring outputs. Giannis on the other hand is one of the most volatile scorers and has a massive drop off in his excess points. He averages nearly 32 PPG but only puts up 18 PPG net of free throw attempts. Giannis has always been a free throw magnent, so this delta isn't too surprising. But, the scoring volatility might be somewhat of a concern for a limited offense. Without Khris Middleton, Milwuakee runs their offense heavily through Giannis and if his scoring volatility is high, I'd be concerned about their ability to hold up in a playoff series against another Eastern conference title contender like Boston. 

### Conclusion: Where do we go from here? 
---

This application of the Sharpe ratio to basketball is by no means perfect. The idea came to me while going over some of the concepts I had learned about over my fall semester. To start, perhaps a dynamic risk-free rate, which is the backbone of a lot of my analysis, is not the best way to adjust a player's scoring and something more consistent should be used. This gets into a larger conversation about how should we treat free throws as part of the game and if free throw attempts or free throw makes should be the "risk-free" measure of points. I settled on using attempts originally, since if you're given a free throw the expectation is that you should make it. However, maybe free throws are not truly risk-free points. Using attempts was my way to take out a source of points that high free throw percentage shooters could use to farm points knowing they were going to get the foul call and a trip to the free throw line. But, for some players like poor shooting big men, free throw attempts are a huge part of their game as a result of opposing defenders fouling them during physical battling below the hoop. Their attempts may be less a product of the referee making calls in their favor and more a product of a defense choosing to foul over giving them the easy bucket. 

Going forward, I plan to revisit the components of teh $B$ ratio in the first place. I've already discussed some of my concerns with using pure free throw attempts as the excess adjustment, but there are more variables that I think might have better use in a basketball context. The direct application of a finance metric to basketball doesn't perfectly capture aspects of gameplay that I'm looking for, and thus a need to include or modify terms is created. A few parameters that might make sense to include would be the correlation or covariance between a players PPG and their FTA as a measure of their "risk-free" dependency. Moreover, not all players are getting the same amount of playing opportunities, measured by minutes played. Minute adjusting all stats could yield different insights and produce more equitable results. 

The next iteration of this analysis will have a focus on identifying hidden talent. The analysis done in this paper covers MVPs and the top 30 scorers in a given NBA season. Any insights or gains produced from my work are at the margins; the players under my focus are **all** incredible and therefore regardless of how high their $B$ ratio is, any team would be lucky to have them on their roster. But, deviations in the $B$ ratio have more signficant implications when we move towards the middle of the pack, looking at role players or rotational pieces in roster construction. Applying the $B$ ratio to understand who to go after in free agency and who to stay away from can make a bigger difference in pushing a team towards a title compared to when the analysis is applied at the top of the league. 

One final consideration, tying back the analysis to a financial concept, would be to apply the use of the individual $B$ ratio to a 5-player rotation metric and optimize for the highest $B$. In other words, could a GM or coach treat a 5-player lineup like a 5-asset portfolio? The capital would need weight allocations to each of the five players, much like in a portfolio one allocates their capital across assets to either minimize risk or maximize return under some risk tolerance. One could treat returns like points and risk the standard deviation of a players points. Optimization would focus on maximizing total points from the lineup, with the decisions being how much would you invest in each of your positions subject to salary cap constraints. This is a rough idea, but a thought motivated by the efficient frontier plots. 

This concludes my introduction of the basketball Sharpe ratio $(B)$. Comments and feedback are always appreciated. Thank you for taking the time to read my work, and as always, go Cavs! 